{
    "tables": [
        {
            "name": "PlayerStats",
            "table": "player_stats",
            "schema": "gamedb",
            "cardinality" : "large",
            "readAccess" : "A user is admin or is a player in the game",
            "joins": [
                {
                    "name": "playerCountry",
                    "to": "country",
                    "type": "toOne",
                    "definition": "${to}.id = ${from}.country_id"
                }
            ],
            "measures" : [
                {
                    "name" : "highScore",
                    "type" : "INTEGER",
                    "definition": "MAX(score)"
                },
                {
                    "name" : "highScoreCoord",
                    "type" : "COORDINATE",
                    "definition": "MAX(score)"
                }
            ],
            "dimensions" : [
                {
                "name" : "countryCode",
                "type" : "RELATIONSHIP",
                "definition" : "playerCountry.isoCode"
                },
                {
                "name" : "countryCode",
                "type" : "TEXT",
                "definition" : "playerCountry.isoCode"
                },
                {
                "name" : "createdOn",
                "type" : "TIME",
                "definition" : "create_on",
                "grains":[{

                    "grain": "MONTH",
                    "sql": "PARSEDATETIME(FORMATDATETIME(${column}, 'yyyy-MM-01'), 'yyyy-MM-dd')"
                 }]
                },
                {
                "name" : "createdOn",
                "type" : "TIME",
                "definition" : "create_on",
                "grains":[{

                    "grain": "MONTH",
                    "sql": "PARSEDATETIME(FORMATDATETIME(${column}, 'yyyy-MM-01'), 'yyyy-MM-dd')"
                 }]
                }
            ]
        }
    ]
}
